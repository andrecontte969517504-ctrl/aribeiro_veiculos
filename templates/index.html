<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Viagens</title>
</head>
<body>
    <form>
        <input type="text" id="rota" placeholder="Rota"><br>
        <input type="text" id="empresa" placeholder="Empresa"><br>
        <input type="text" id="motorista" placeholder="Motorista"><br>
        <input type="text" id="placa" placeholder="Placa"><br>
        <input type="text" id="carga" placeholder="Carga"><br>
        <input type="number" id="preco_km" placeholder="PreÃ§o/KM"><br>
        <input type="text" id="nf" placeholder="NF"><br>
        <input type="datetime-local" id="data"><br>
        
        <button type="button" onclick="salvar()">Salvar</button>
        <button type="button" onclick="limpar()">Limpar</button>
        <button type="button" onclick="pdf()">PDF</button>
    </form>
    
    <div id="msg"></div>
    
    <script>
    function salvar() {
        const dados = {
            rota: document.getElementById('rota').value,
            empresa: document.getElementById('empresa').value,
            motorista: document.getElementById('motorista').value,
            placa: document.getElementById('placa').value,
            carga: document.getElementById('carga').value,
            preco_km: document.getElementById('preco_km').value,
            nf: document.getElementById('nf').value,
            data: document.getElementById('data').value
        };
        
        fetch('/api/viagens', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(dados)
        })
        .then(r => r.json())
        .then(d => {
            document.getElementById('msg').innerText = d.status === 'ok' ? 'Salvo' : 'Erro';
        });
    }
    
    function limpar() {
        document.querySelectorAll('input').forEach(i => i.value = '');
    }
    
    function pdf() {
        window.print();
    }
    </script>
</body>
</html>
